(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},98183,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={assign:function(){return i},searchParamsToUrlQuery:function(){return l},urlQueryToSearchParams:function(){return o}};for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]});function l(e){let a={};for(let[t,r]of e.entries()){let e=a[t];void 0===e?a[t]=r:Array.isArray(e)?e.push(r):a[t]=[e,r]}return a}function s(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let a=new URLSearchParams;for(let[t,r]of Object.entries(e))if(Array.isArray(r))for(let e of r)a.append(t,s(e));else a.set(t,s(r));return a}function i(e,...a){for(let t of a){for(let a of t.keys())e.delete(a);for(let[a,r]of t.entries())e.append(a,r)}return e}},95057,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={formatUrl:function(){return o},formatWithValidation:function(){return u},urlObjectKeys:function(){return i}};for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]});let l=e.r(90809)._(e.r(98183)),s=/https?|ftp|gopher|file/;function o(e){let{auth:a,hostname:t}=e,r=e.protocol||"",n=e.pathname||"",o=e.hash||"",i=e.query||"",u=!1;a=a?encodeURIComponent(a).replace(/%3A/i,":")+"@":"",e.host?u=a+e.host:t&&(u=a+(~t.indexOf(":")?`[${t}]`:t),e.port&&(u+=":"+e.port)),i&&"object"==typeof i&&(i=String(l.urlQueryToSearchParams(i)));let c=e.search||i&&`?${i}`||"";return r&&!r.endsWith(":")&&(r+=":"),e.slashes||(!r||s.test(r))&&!1!==u?(u="//"+(u||""),n&&"/"!==n[0]&&(n="/"+n)):u||(u=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),n=n.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${r}${u}${n}${c}${o}`}let i=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function u(e){return o(e)}},18581,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return n}});let r=e.r(71645);function n(e,a){let t=(0,r.useRef)(null),n=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=t.current;e&&(t.current=null,e());let a=n.current;a&&(n.current=null,a())}else e&&(t.current=l(e,r)),a&&(n.current=l(a,r))},[e,a])}function l(e,a){if("function"!=typeof e)return e.current=a,()=>{e.current=null};{let t=e(a);return"function"==typeof t?t:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),a.exports=t.default)},18967,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return k},MissingStaticPage:function(){return v},NormalizeError:function(){return b},PageNotFoundError:function(){return J},SP:function(){return m},ST:function(){return h},WEB_VITALS:function(){return l},execOnce:function(){return s},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return i},isResSent:function(){return _},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return j}};for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]});let l=["CLS","FCP","FID","INP","LCP","TTFB"];function s(e){let a,t=!1;return(...r)=>(t||(t=!0,a=e(...r)),a)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>o.test(e);function u(){let{protocol:e,hostname:a,port:t}=window.location;return`${e}//${a}${t?":"+t:""}`}function c(){let{href:e}=window.location,a=u();return e.substring(a.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function _(e){return e.finished||e.headersSent}function p(e){let a=e.split("?");return a[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(a[1]?`?${a.slice(1).join("?")}`:"")}async function f(e,a){let t=a.res||a.ctx&&a.ctx.res;if(!e.getInitialProps)return a.ctx&&a.Component?{pageProps:await f(a.Component,a.ctx)}:{};let r=await e.getInitialProps(a);if(t&&_(t))return r;if(!r)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${r}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}let m="u">typeof performance,h=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class b extends Error{}class J extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,a){super(),this.message=`Failed to load static file for page: ${e} ${a}`}}class k extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isLocalURL",{enumerable:!0,get:function(){return l}});let r=e.r(18967),n=e.r(52817);function l(e){if(!(0,r.isAbsoluteUrl)(e))return!0;try{let a=(0,r.getLocationOrigin)(),t=new URL(e,a);return t.origin===a&&(0,n.hasBasePath)(t.pathname)}catch(e){return!1}}},84508,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},22016,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={default:function(){return g},useLinkStatus:function(){return J}};for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]});let l=e.r(90809),s=e.r(43476),o=l._(e.r(71645)),i=e.r(95057),u=e.r(8372),c=e.r(18581),d=e.r(18967),_=e.r(5550);e.r(33525);let p=e.r(91949),f=e.r(73668),m=e.r(9396);function h(e){return"string"==typeof e?e:(0,i.formatUrl)(e)}function g(a){var t;let r,n,l,[i,g]=(0,o.useOptimistic)(p.IDLE_LINK_STATUS),J=(0,o.useRef)(null),{href:v,as:k,children:j,prefetch:y=null,passHref:x,replace:N,shallow:C,scroll:S,onClick:q,onMouseEnter:I,onTouchStart:A,legacyBehavior:T=!1,onNavigate:E,ref:O,unstable_dynamicOnHover:L,...P}=a;r=j,T&&("string"==typeof r||"number"==typeof r)&&(r=(0,s.jsx)("a",{children:r}));let R=o.default.useContext(u.AppRouterContext),w=!1!==y,$=!1!==y?null===(t=y)||"auto"===t?m.FetchStrategy.PPR:m.FetchStrategy.Full:m.FetchStrategy.PPR,{href:B,as:U}=o.default.useMemo(()=>{let e=h(v);return{href:e,as:k?h(k):e}},[v,k]);if(T){if(r?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=o.default.Children.only(r)}let D=T?n&&"object"==typeof n&&n.ref:O,M=o.default.useCallback(e=>(null!==R&&(J.current=(0,p.mountLinkInstance)(e,B,R,$,w,g)),()=>{J.current&&((0,p.unmountLinkForCurrentNavigation)(J.current),J.current=null),(0,p.unmountPrefetchableInstance)(e)}),[w,B,R,$,g]),F={ref:(0,c.useMergedRef)(M,D),onClick(a){T||"function"!=typeof q||q(a),T&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(a),!R||a.defaultPrevented||function(a,t,r,n,l,s,i){if("u">typeof window){let u,{nodeName:c}=a.currentTarget;if("A"===c.toUpperCase()&&((u=a.currentTarget.getAttribute("target"))&&"_self"!==u||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||a.nativeEvent&&2===a.nativeEvent.which)||a.currentTarget.hasAttribute("download"))return;if(!(0,f.isLocalURL)(t)){l&&(a.preventDefault(),location.replace(t));return}if(a.preventDefault(),i){let e=!1;if(i({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(99781);o.default.startTransition(()=>{d(r||t,l?"replace":"push",s??!0,n.current)})}}(a,B,U,J,N,S,E)},onMouseEnter(e){T||"function"!=typeof I||I(e),T&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),R&&w&&(0,p.onNavigationIntent)(e.currentTarget,!0===L)},onTouchStart:function(e){T||"function"!=typeof A||A(e),T&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),R&&w&&(0,p.onNavigationIntent)(e.currentTarget,!0===L)}};return(0,d.isAbsoluteUrl)(U)?F.href=U:T&&!x&&("a"!==n.type||"href"in n.props)||(F.href=(0,_.addBasePath)(U)),l=T?o.default.cloneElement(n,F):(0,s.jsx)("a",{...P,...F,children:r}),(0,s.jsx)(b.Provider,{value:i,children:l})}e.r(84508);let b=(0,o.createContext)(p.IDLE_LINK_STATUS),J=()=>(0,o.useContext)(b);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),a.exports=t.default)},48577,e=>{e.v({app:"page-module__kqJ0Ja__app",backLink:"page-module__kqJ0Ja__backLink",blink:"page-module__kqJ0Ja__blink",brand:"page-module__kqJ0Ja__brand",brandDot:"page-module__kqJ0Ja__brandDot",brandName:"page-module__kqJ0Ja__brandName",brandTag:"page-module__kqJ0Ja__brandTag",btn:"page-module__kqJ0Ja__btn",btnDanger:"page-module__kqJ0Ja__btnDanger",btnFull:"page-module__kqJ0Ja__btnFull",btnGhost:"page-module__kqJ0Ja__btnGhost",btnPrimary:"page-module__kqJ0Ja__btnPrimary",btnSm:"page-module__kqJ0Ja__btnSm",btnSuccess:"page-module__kqJ0Ja__btnSuccess",caseItem:"page-module__kqJ0Ja__caseItem",caseItemActive:"page-module__kqJ0Ja__caseItemActive",caseList:"page-module__kqJ0Ja__caseList",caseMeta:"page-module__kqJ0Ja__caseMeta",caseName:"page-module__kqJ0Ja__caseName",caseNum:"page-module__kqJ0Ja__caseNum",chip:"page-module__kqJ0Ja__chip",chip_critical:"page-module__kqJ0Ja__chip_critical",chip_info:"page-module__kqJ0Ja__chip_info",chip_normal:"page-module__kqJ0Ja__chip_normal",chip_warning:"page-module__kqJ0Ja__chip_warning",deleteRowBtn:"page-module__kqJ0Ja__deleteRowBtn",editorContent:"page-module__kqJ0Ja__editorContent",editorHeader:"page-module__kqJ0Ja__editorHeader",editorHeaderLeft:"page-module__kqJ0Ja__editorHeaderLeft",editorLabel:"page-module__kqJ0Ja__editorLabel",editorPanel:"page-module__kqJ0Ja__editorPanel",ekgCell:"page-module__kqJ0Ja__ekgCell",ekgLink:"page-module__kqJ0Ja__ekgLink",emptyIcon:"page-module__kqJ0Ja__emptyIcon",emptyList:"page-module__kqJ0Ja__emptyList",emptyState:"page-module__kqJ0Ja__emptyState",fileBtn:"page-module__kqJ0Ja__fileBtn",loader:"page-module__kqJ0Ja__loader",mainGrid:"page-module__kqJ0Ja__mainGrid",modal:"page-module__kqJ0Ja__modal",modalActions:"page-module__kqJ0Ja__modalActions",modalIcon:"page-module__kqJ0Ja__modalIcon",modalOverlay:"page-module__kqJ0Ja__modalOverlay",noStages:"page-module__kqJ0Ja__noStages",pacienteInput:"page-module__kqJ0Ja__pacienteInput",pulse:"page-module__kqJ0Ja__pulse",rhythmSelect:"page-module__kqJ0Ja__rhythmSelect",searchInput:"page-module__kqJ0Ja__searchInput",sidebar:"page-module__kqJ0Ja__sidebar",sidebarFooter:"page-module__kqJ0Ja__sidebarFooter",sidebarHeader:"page-module__kqJ0Ja__sidebarHeader",sidebarTitle:"page-module__kqJ0Ja__sidebarTitle",slideIn:"page-module__kqJ0Ja__slideIn",stageBadge:"page-module__kqJ0Ja__stageBadge",stageNum:"page-module__kqJ0Ja__stageNum",stagesCount:"page-module__kqJ0Ja__stagesCount",stagesLeft:"page-module__kqJ0Ja__stagesLeft",stagesSection:"page-module__kqJ0Ja__stagesSection",stagesTable:"page-module__kqJ0Ja__stagesTable",stagesTitle:"page-module__kqJ0Ja__stagesTitle",stagesToolbar:"page-module__kqJ0Ja__stagesToolbar",tInput:"page-module__kqJ0Ja__tInput",tTextarea:"page-module__kqJ0Ja__tTextarea",tableWrapper:"page-module__kqJ0Ja__tableWrapper",toast:"page-module__kqJ0Ja__toast",toastContainer:"page-module__kqJ0Ja__toastContainer",toast_error:"page-module__kqJ0Ja__toast_error",toast_info:"page-module__kqJ0Ja__toast_info",toast_success:"page-module__kqJ0Ja__toast_success",topbar:"page-module__kqJ0Ja__topbar",topbarLeft:"page-module__kqJ0Ja__topbarLeft",vitalBp:"page-module__kqJ0Ja__vitalBp",vitalCapno:"page-module__kqJ0Ja__vitalCapno",vitalCell:"page-module__kqJ0Ja__vitalCell",vitalGlu:"page-module__kqJ0Ja__vitalGlu",vitalHr:"page-module__kqJ0Ja__vitalHr",vitalSpo2:"page-module__kqJ0Ja__vitalSpo2"})},87743,e=>{"use strict";var a=e.i(43476),t=e.i(71645),r=e.i(22016),n=e.i(48577);let l=[{value:"RITMO_SINUSAL",label:"Ritmo Sinusal",chip:"normal"},{value:"BRADICARDIA_SINUSAL",label:"Bradicardia Sinusal",chip:"warning"},{value:"TAQUICARDIA_SUPRAVENTRICULAR",label:"Taquicardia SVT",chip:"warning"},{value:"FIBRILACION_AURICULAR",label:"FibrilaciÃ³n Auricular",chip:"warning"},{value:"BLOQUEO_AV_GRADO_1",label:"Bloqueo AV Grado 1",chip:"info"},{value:"BLOQUEO_AV_2_MOBITZ_1",label:"Bloqueo AV Mobitz I",chip:"warning"},{value:"TAQUICARDIA_VENTRICULAR",label:"Taquicardia Ventricular",chip:"critical"},{value:"FIBRILACION_VENTRICULAR",label:"FibrilaciÃ³n Ventricular",chip:"critical"},{value:"ASISTOLIA",label:"Asistolia",chip:"critical"},{value:"INFARTO_AGUDO_MIOCARDIO",label:"Infarto Agudo (IAM)",chip:"critical"}];function s(e){return l.find(a=>a.value===e)||{label:e,chip:"info"}}function o({value:e}){if(!e)return null;let t=s(e);return(0,a.jsx)("span",{className:`${n.default.chip} ${n.default[`chip_${t.chip}`]}`,children:t.label})}function i({toasts:e}){return(0,a.jsx)("div",{className:n.default.toastContainer,children:e.map(e=>(0,a.jsxs)("div",{className:`${n.default.toast} ${n.default[`toast_${e.type}`]}`,children:["success"===e.type&&"âœ“ ","error"===e.type&&"âœ• ","info"===e.type&&"â„¹ ",e.message]},e.id))})}function u(){let[e,l]=(0,t.useState)([]),[s,o]=(0,t.useState)(-1),[u,d]=(0,t.useState)(""),[_,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[h,g]=(0,t.useState)(!0),{toasts:b,show:J}=function(){let[e,a]=(0,t.useState)([]);return{toasts:e,show:(0,t.useCallback)((e,t="success")=>{let r=Date.now();a(a=>[...a,{id:r,message:e,type:t}]),setTimeout(()=>a(e=>e.filter(e=>e.id!==r)),3e3)},[])}}(),v=(0,t.useRef)(null);(0,t.useEffect)(()=>{fetch("/api/casos").then(e=>e.json()).then(e=>{l(Array.isArray(e)?e:[]),g(!1)}).catch(()=>{J("Error al cargar los casos","error"),g(!1)})},[]),(0,t.useEffect)(()=>{let e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),C())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[e]);let k=s>=0?e[s]:null,j=e.map((e,a)=>a).filter(a=>!u||e[a].paciente.toLowerCase().includes(u.toLowerCase()));function y(e){l(a=>a.map((a,t)=>t!==s?a:{...a,etapas:a.etapas.filter((a,t)=>t!==e)}))}function x(e,a,t){l(r=>r.map((r,n)=>n!==s?r:{...r,etapas:r.etapas.map((r,n)=>n===e?{...r,[a]:t}:r)}))}async function N(e,a){if(!e)return;J("Subiendo imagenâ€¦","info");let t=new FormData;t.append("ekgImage",e);try{let e=await fetch("/api/upload",{method:"POST",body:t}),r=await e.json();e.ok?(x(a,"ekg12d",r.filePath),J("Imagen subida correctamente","success")):J("Error al subir imagen","error")}catch{J("Error de conexiÃ³n al subir","error")}}async function C(){p(!0);try{(await fetch("/api/casos",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?J("Cambios guardados correctamente","success"):J("Error al guardar","error")}catch{J("Error de conexiÃ³n al guardar","error")}finally{p(!1)}}return(0,a.jsxs)("div",{className:n.default.app,children:[(0,a.jsxs)("header",{className:n.default.topbar,children:[(0,a.jsxs)("div",{className:n.default.topbarLeft,children:[(0,a.jsx)(r.default,{href:"/",className:n.default.backLink,children:"â† MenÃº"}),(0,a.jsxs)("div",{className:n.default.brand,children:[(0,a.jsx)("span",{className:n.default.brandDot}),(0,a.jsx)("span",{className:n.default.brandName,children:"SimCardio"}),(0,a.jsx)("span",{className:n.default.brandTag,children:"MANTENIMIENTO"})]})]}),(0,a.jsx)("button",{className:`${n.default.btn} ${n.default.btnSuccess}`,onClick:C,disabled:_,children:_?"â³ Guardandoâ€¦":"ðŸ’¾ Guardar Cambios"})]}),(0,a.jsxs)("div",{className:n.default.mainGrid,children:[(0,a.jsxs)("aside",{className:n.default.sidebar,children:[(0,a.jsxs)("div",{className:n.default.sidebarHeader,children:[(0,a.jsx)("span",{className:n.default.sidebarTitle,children:"Casos ClÃ­nicos"}),(0,a.jsx)("input",{className:n.default.searchInput,type:"text",placeholder:"ðŸ” Buscar caso...",value:u,onChange:e=>d(e.target.value)})]}),(0,a.jsxs)("div",{className:n.default.caseList,children:[h&&(0,a.jsxs)("div",{className:n.default.loader,children:[(0,a.jsx)("span",{}),"Cargando..."]}),!h&&0===j.length&&(0,a.jsx)("div",{className:n.default.emptyList,children:"Sin resultados"}),!h&&j.map(t=>(0,a.jsxs)("div",{className:`${n.default.caseItem} ${t===s?n.default.caseItemActive:""}`,onClick:()=>{o(t)},children:[(0,a.jsxs)("div",{className:n.default.caseNum,children:["Caso ",t+1]}),(0,a.jsx)("div",{className:n.default.caseName,children:e[t].paciente.length>65?e[t].paciente.slice(0,65)+"â€¦":e[t].paciente}),(0,a.jsx)("div",{className:n.default.caseMeta,children:(0,a.jsxs)("span",{className:n.default.stageBadge,children:[e[t].etapas?.length??0," etapa",e[t].etapas?.length!==1?"s":""]})})]},t))]}),(0,a.jsx)("div",{className:n.default.sidebarFooter,children:(0,a.jsx)("button",{className:`${n.default.btn} ${n.default.btnPrimary} ${n.default.btnFull}`,onClick:function(){let a={paciente:"Nuevo Caso ClÃ­nico",etapas:[]};l(e=>[...e,a]),o(e.length),d("")},children:"+ Nuevo Caso"})})]}),(0,a.jsxs)("main",{className:n.default.editorPanel,children:[!k&&(0,a.jsxs)("div",{className:n.default.emptyState,children:[(0,a.jsx)("span",{className:n.default.emptyIcon,children:"ðŸ“‹"}),(0,a.jsx)("h3",{children:"Selecciona un caso"}),(0,a.jsx)("p",{children:"Elige un caso de la lista o crea uno nuevo"})]}),k&&(0,a.jsxs)("div",{className:n.default.editorContent,children:[(0,a.jsxs)("div",{className:n.default.editorHeader,children:[(0,a.jsxs)("div",{className:n.default.editorHeaderLeft,children:[(0,a.jsxs)("div",{className:n.default.editorLabel,children:["CASO #",s+1," â€” DescripciÃ³n del Paciente"]}),(0,a.jsx)("textarea",{className:n.default.pacienteInput,rows:2,value:k.paciente,onChange:e=>{var a;return a=e.target.value,void l(e=>e.map((e,t)=>t===s?{...e,paciente:a}:e))},placeholder:"DescripciÃ³n clÃ­nica del paciente..."})]}),(0,a.jsx)("button",{className:`${n.default.btn} ${n.default.btnDanger} ${n.default.btnSm}`,onClick:()=>m(!0),children:"ðŸ—‘ Eliminar Caso"})]}),(0,a.jsxs)("div",{className:n.default.stagesSection,children:[(0,a.jsxs)("div",{className:n.default.stagesToolbar,children:[(0,a.jsxs)("div",{className:n.default.stagesLeft,children:[(0,a.jsx)("span",{className:n.default.stagesTitle,children:"Etapas"}),(0,a.jsx)("span",{className:n.default.stagesCount,children:k.etapas?.length??0})]}),(0,a.jsx)("button",{className:`${n.default.btn} ${n.default.btnGhost} ${n.default.btnSm}`,onClick:function(){l(e=>e.map((e,a)=>a!==s?e:{...e,etapas:[...e.etapas,{infoAdicional:"",bp:"",spo2:"",capno:"",hr:"",glucose:"",ritmo:"RITMO_SINUSAL"}]})),setTimeout(()=>{v.current?.lastElementChild?.scrollIntoView({behavior:"smooth"})},50)},children:"+ Agregar Etapa"})]}),(0,a.jsxs)("div",{className:n.default.tableWrapper,children:[(0,a.jsxs)("table",{className:n.default.stagesTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"#"}),(0,a.jsx)("th",{children:"DescripciÃ³n / Info Adicional"}),(0,a.jsx)("th",{children:"â¤ï¸ HR"}),(0,a.jsx)("th",{children:"ðŸ©¸ BP"}),(0,a.jsx)("th",{children:"ðŸ’§ SpOâ‚‚"}),(0,a.jsx)("th",{children:"ðŸ« EtCOâ‚‚"}),(0,a.jsx)("th",{children:"ðŸ¬ Glu"}),(0,a.jsx)("th",{children:"âš¡ Ritmo"}),(0,a.jsx)("th",{children:"ðŸ–¼ EKG 12D"}),(0,a.jsx)("th",{})]})}),(0,a.jsx)("tbody",{ref:v,children:k.etapas?.map((e,t)=>(0,a.jsx)(c,{idx:t,etapa:e,onChange:x,onRemove:y,onUpload:N},t))})]}),k.etapas?.length===0&&(0,a.jsx)("div",{className:n.default.noStages,children:'Sin etapas â€” haz clic en "+ Agregar Etapa"'})]})]})]})]})]}),f&&(0,a.jsx)("div",{className:n.default.modalOverlay,onClick:()=>m(!1),children:(0,a.jsxs)("div",{className:n.default.modal,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:n.default.modalIcon,children:"ðŸ—‘"}),(0,a.jsx)("h3",{children:"Eliminar caso clÃ­nico"}),(0,a.jsx)("p",{children:"Esta acciÃ³n es irreversible. Â¿Deseas eliminar el caso y todas sus etapas?"}),(0,a.jsxs)("div",{className:n.default.modalActions,children:[(0,a.jsx)("button",{className:`${n.default.btn} ${n.default.btnGhost}`,onClick:()=>m(!1),children:"Cancelar"}),(0,a.jsx)("button",{className:`${n.default.btn} ${n.default.btnDanger}`,onClick:function(){m(!1),l(e=>e.filter((e,a)=>a!==s)),o(-1),J("Caso eliminado","info")},children:"SÃ­, eliminar"})]})]})}),(0,a.jsx)(i,{toasts:b})]})}function c({idx:e,etapa:t,onChange:r,onRemove:i,onUpload:u}){return s(t.ritmo),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:n.default.stageNum,children:e+1}),(0,a.jsx)("td",{children:(0,a.jsx)("textarea",{className:n.default.tTextarea,rows:2,defaultValue:t.infoAdicional||"",onBlur:a=>r(e,"infoAdicional",a.target.value),placeholder:"DescripciÃ³n de la etapa..."})}),[{field:"hr",cls:"vitalHr"},{field:"bp",cls:"vitalBp"},{field:"spo2",cls:"vitalSpo2"},{field:"capno",cls:"vitalCapno"},{field:"glucose",cls:"vitalGlu"}].map(({field:l,cls:s})=>(0,a.jsx)("td",{className:n.default.vitalCell,children:(0,a.jsx)("input",{className:`${n.default.tInput} ${n.default[s]}`,defaultValue:t[l]||"",placeholder:"â€”",onBlur:a=>r(e,l,a.target.value)})},l)),(0,a.jsxs)("td",{children:[(0,a.jsxs)("select",{className:n.default.rhythmSelect,value:t.ritmo||"",onChange:a=>r(e,"ritmo",a.target.value),children:[(0,a.jsx)("option",{value:"",children:"â€” Sin ritmo â€”"}),l.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,a.jsx)(o,{value:t.ritmo})]}),(0,a.jsxs)("td",{className:n.default.ekgCell,children:[t.ekg12d&&(0,a.jsx)("a",{href:t.ekg12d,target:"_blank",rel:"noreferrer",className:n.default.ekgLink,children:"ðŸ–¼ Ver imagen"}),(0,a.jsxs)("label",{className:n.default.fileBtn,children:["ðŸ“¤ ",t.ekg12d?"Cambiar":"Subir ECG",(0,a.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:a=>u(a.target.files?.[0],e)})]})]}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{className:n.default.deleteRowBtn,onClick:()=>i(e),title:"Eliminar etapa",children:"âœ•"})})]})}e.s(["default",()=>u])}]);